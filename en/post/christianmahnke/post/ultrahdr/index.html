<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8"><meta property="og:url" content="https://projektemacher.org/en/post/christianmahnke/post/ultrahdr/">
  <meta property="og:site_name" content="Projektemacher">
  <meta property="og:title" content="LibUltraHDR">
  <meta property="og:description" content="After research, it was necessary to explore some possible workflows and to create tools for a project in preparation. Based on Greg Benz’s preliminary work on HDR support, LibUltraHDR was the most sensible candidate for further experimentation.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2024-05-23T11:22:44+02:00">
    <meta property="article:modified_time" content="2024-05-23T11:22:44+02:00">
<title>
  LibUltraHDR · Projektemacher
</title><link rel="canonical" href="https://projektemacher.org/en/post/christianmahnke/post/ultrahdr/"><meta name="author" content="Christian Mahnke">
<meta http-equiv="Content-Language" content="en">

<meta name="description" content="Blog factory">
<meta property="og:type" content="article" /><meta property="og:url" content="https://projektemacher.org/en/post/christianmahnke/post/ultrahdr/" /><meta property="og:title" content="LibUltraHDR" />

  
  
    
  



<meta name="keywords" content="libultrahdr, UltraHDR, HDR, Photography[libultrahdr, UltraHDR, HDR, Photography], Light, Licht2024, DigitalImages, HDR">
<meta name="generator" content="Hugo 0.148.2">
<meta name="projektemacher.org:build-date" content="2025-09-06 04:02:04.621759729 &#43;0000 UTC m=&#43;9.248356565"><meta name="projektemacher.org:stats" content="{&#34;count&#34;:&#34;2540&#34;,&#34;latest&#34;:&#34;2026-11-10T12:47:44&#43;02:00&#34;}">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=no">

<link rel="icon" type="image/png" href="https://projektemacher.org/images/favicon-32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://projektemacher.org/images/favicon-16.png" sizes="16x16"><link rel="icon" type="image/svg+xml" href="https://projektemacher.org/images/cm.svg">
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
<link href="https://projektemacher.org/css/3dcde2e700baa65d3814003bfc8fa7f9.min.955f89e16b1a528bbcafc08bad1eca46a37f7ebbceefb7a80afb687c7d7d19e0.css" rel="stylesheet" integrity="sha256-lV&#43;J4WsaUou8r8CLrR7KRqN/frvO77eoCvtofH19GeA=">
<script src="https://projektemacher.org/js/5d85c20c8f862f9ecfa0aee0edbc8fe4.min.922583d2e8ead914d71230bc9f9e5465d65518d3ce7f50272ed030ce231e456b.js" integrity="sha256-kiWD0ujq2RTXEjC8n55UZdZVGNPOf1AnLtAwziMeRWs="></script>


    
    

    

    <link rel="icon" type="image/png" href="https://projektemacher.org/images/favicon-32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://projektemacher.org/images/favicon-16.png" sizes="16x16">
    
        <link rel="icon" type="image/svg+xml" href="https://projektemacher.org/images/cm.svg">
    
    <link rel="alternate" type="text/bibtex" href="https://projektemacher.org/en/post/christianmahnke/post/ultrahdr/citation.bib" title="Projektemacher" />
    </head>

  
  
  <body class="colorscheme-light ">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://projektemacher.org/en"><img alt="Logo" class="header-logo" src="https://projektemacher.org/images/laborant.svg" />
        Projektemacher</a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/blogs/">Sites &amp; Blogs</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/posts/">News</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/archive/">Archive</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/search/">Search</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://merch.projektemacher.org/en/">Merch</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/contact/">Contact</a>
            </li>
          
        
        
          
          
          
            
              
                <li class="navigation-item menu-separator">
                  <span>|</span>
                </li>
                
              
              <li class="navigation-item">
                <a href="https://projektemacher.org/post/christianmahnke/post/ultrahdr/">Deutsch</a>
              </li>
            
          
        
      </ul>
    
  </section>
</nav>


      
  <div class="content page">
    <section class="container page ">
      <article>
        <header>
          <h1 class="header">LibUltraHDR</h1>
        </header>
        <p>After <a href="https://projektemacher.org/en/post/hdr-awesome-list/">research</a>, it was necessary to explore some possible workflows and to create tools for a project in preparation. Based on <a href="https://gregbenzphotography.com/hdr/" target="_blank">Greg Benz</a>&rsquo;s preliminary work on HDR support, LibUltraHDR was the most sensible candidate for further experimentation.</p>
<h1 id="libultrahdr">
  LibUltraHDR
  <a class="heading-link" href="#libultrahdr">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h1>
<p><a href="https://github.com/google/libultrahdr" target="_blank">LibUltraHDR</a> is primarily a library for UltraHDR content. The format itself is comparable to <a href="https://en.wikipedia.org/wiki/JPEG#JPEG_Multi-Picture_Format" target="_blank">MPO</a>. There is a primary (SDR) image, which is also used as a fallback for software without UltraHDR support, and a secondary image in the metadata, the so-called gain map. This maps the luminance gain to be applied to the SDR. More information on how gain maps work can be found at <a href="https://helpx.adobe.com/camera-raw/using/gain-map.html" target="_blank">Adobe</a>.</p>
<p>Technical documentation is available at <a href="https://developer.android.com/media/platform/hdr-image-format" target="_blank">Android Developers</a>.</p>
<h2 id="status">
  Status
  <a class="heading-link" href="#status">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<p>Greg Benz and others are currently working on promoting support for the format among relevant open source projects:</p>
<ul>
<li><a href="https://github.com/libvips/libvips/issues/3799" target="_blank">LibVips #3799</a></li>
<li><a href="https://github.com/ImageMagick/ImageMagick/issues/6377" target="_blank">ImageMagick #6377</a></li>
<li><a href="https://github.com/Tom94/tev/issues/226" target="_blank"><strong>Tev</strong> #226</a></li>
<li><a href="https://github.com/13thsymphony/HDRImageViewer/issues/66" target="_blank">HDRImageViewer #66</a></li>
<li><a href="https://trac.ffmpeg.org/ticket/10974" target="_blank"><code>ffmpeg</code> #10974</a></li>
<li><a href="https://github.com/python-pillow/Pillow/issues/8036" target="_blank">Pillow #8036</a></li>
<li><a href="https://github.com/Fyrd/caniuse/issues/6759" target="_blank">CanIUse #6759</a></li>
<li><a href="https://github.com/libjxl/libjxl/issues/2685" target="_blank"><code>libjxl</code> #2685</a></li>
<li><a href="https://github.com/pulsejet/memories/issues/1110" target="_blank">Memories #1110</a></li>
</ul>
<p>There are also some first websites with support:</p>
<ul>
<li><a href="https://gainmap-creator.monogrid.com/" target="_blank">Gainmap Creator</a></li>
<li><a href="https://github.com/albertz/playground/wiki/HDR-demo" target="_blank">Demo for conversion using <code>ffmpeg</code> and <code>libultrahdr</code></a> by <a href="https://github.com/albertz" target="_blank">Albert Zeyer</a></li>
<li><a href="https://github.com/albertz/playground/blob/master/ultrahdr.py" target="_blank"><code>libultrahdr</code> and Python</a>, also by Albert Zeyer</li>
</ul>
<h2 id="manual-conversion-with-ffmpeg">
  Manual conversion with <code>ffmpeg</code>
  <a class="heading-link" href="#manual-conversion-with-ffmpeg">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<p>Since the release of version 0.8 of <code>libultrahdr</code> the command line options have changed, here is the current (May 2024) version. It is important that:</p>
<ul>
<li>The dimensions of the input image are known (X, Y)</li>
<li>The dimensions are divisible by two (even)</li>
</ul>
<p>In the first step, a YUV representation of the input image must be generated, this is used as a gain map, i.e. as a definition of the gain.</p>
<pre tabindex="0"><code>ffmpeg -i input.jpg -filter:v format=p010 output.yuv
</code></pre><p>In the next step, the gain map created can then be used to generate the desired image:</p>
<pre tabindex="0"><code>ultrahdr_app -m 0 -p output.yuv -i input.jpg -w X -h Y -a 0
</code></pre><p>In the coming months it can be expected that the somewhat esoteric YUV format will either be easier to generate or can be dispensed with altogether.</p>
<h2 id="docker-image">
  Docker Image
  <a class="heading-link" href="#docker-image">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<p>There is now also a Docker image that provides the latest version of <code>libultrahdr</code> together with ImageMagick with UltraHDR support.</p>
<pre tabindex="0"><code>docker pull ghcr.io/cmahnke/hdr-tools:latest
</code></pre><h1 id="next-steps">
  Next steps
  <a class="heading-link" href="#next-steps">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h1>
<p>Currently, HDR support for HDR images and content is limited to Chrome and its derivative browsers, which have a 75% market share. The <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=hdr" target="_blank">HDR support of Firefox</a>, or rather the way to get there, is rather embarrassing - not even HDR video formats are fully supported.</p>
<p>For Chrome-based browsers, however, it should also be possible to add HDR content to HTML canvas elements.</p>
<h1 id="update-6724">
  Update 6.7.24
  <a class="heading-link" href="#update-6724">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h1>
<p>Two examples from my recent vacation:</p>


<div>Sunset over Hörnum</div><div>Sunset on Föhr</div>
<p>HDR will be activated in the full screen view.</p>
      </article>
    </section>
</div>



    </main>
    <footer class="footer"><div class="footer-container">
    <p class="projektemacher">
        Projektemacher is a <a href="https://projektemacher.org/en/">Projektemacher</a> blog <a title="Christian Mahnke" class="footer-link-cm" href="https://christianmahnke.de/"><img src="https://projektemacher.org/images/cm.svg" style="height: 16px; margin-left: .5rem;"></a>
    </p><p class="copyright">&copy; 2009 - 2024 </p><p class="privacy"><a href="https://projektemacher.org/privacy" title="Privacy policy">Privacy policy</a></p>Powered by <div class="footer-powered-by"><a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.</div></div>

  </footer>
  </body>

</html>
