<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8"><meta property="og:url" content="https://projektemacher.org/en/post/christianmahnke/post/simple-wikidata-queries/article.html">
  <meta property="og:site_name" content="Projektemacher">
  <meta property="og:title" content="Simple data enrichment with Wikidata">
  <meta property="og:description" content="Found while tidying up the browser tabs…">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2025-11-18T20:14:44+02:00">
    <meta property="article:modified_time" content="2025-11-18T20:14:44+02:00">
<title>
  Simple data enrichment with Wikidata · Projektemacher
</title><link rel="canonical" href="https://projektemacher.org/en/post/christianmahnke/post/simple-wikidata-queries/article.html"><meta name="author" content="Christian Mahnke">
  <meta name="dc.creator" content="Christian Mahnke">

<meta http-equiv="Content-Language" content="en">
<meta name="dc.type" content="Text">
<meta name="description" content="Blog factory">
<meta property="og:type" content="article" /><meta property="og:url" content="https://projektemacher.org/en/post/christianmahnke/post/simple-wikidata-queries/article.html" /><meta property="og:title" content="Simple data enrichment with Wikidata" />

  
  
    
  



<meta name="keywords" content="blog, book, digitization, history, cultural history, Wikidata, SPARQL, Python"><meta name="dc.subject" content="blog"><meta name="dc.subject" content="book"><meta name="dc.subject" content="digitization"><meta name="dc.subject" content="history"><meta name="dc.subject" content="cultural history"><meta name="dc.subject" content="Wikidata"><meta name="dc.subject" content="SPARQL"><meta name="dc.subject" content="Python">
<meta name="generator" content="Hugo 0.156.0">
<meta name="projektemacher.org:build-date" content="2026-03-01 05:25:23.469889108 &#43;0000 UTC m=&#43;13.886235846"><meta name="projektemacher.org:stats" content="{&#34;count&#34;:&#34;5067&#34;,&#34;latest&#34;:&#34;2027-10-19T12:47:44&#43;02:00&#34;}">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=no">

<link rel="icon" type="image/png" href="https://projektemacher.org/images/favicon-32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://projektemacher.org/images/favicon-16.png" sizes="16x16"><link rel="icon" type="image/svg+xml" href="https://projektemacher.org/images/cm.svg">
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
<link href="https://projektemacher.org/css/3dcde2e700baa65d3814003bfc8fa7f9.min.da70574f9d939ceb6c2b98417c8559a15bdcab44b3c80c7fd03e43eb4da25843.css" rel="stylesheet" integrity="sha256-2nBXT52TnOtsK5hBfIVZoVvcq0SzyAx/0D5D602iWEM=">
<script src="https://projektemacher.org/js/5d85c20c8f862f9ecfa0aee0edbc8fe4.min.9e312a1385cd8a0a9b42110fe749082c05337c88e1df8799f014d3e0bddb2e9e.js" integrity="sha256-njEqE4XNigqbQhEP50kILAUzfIjh34eZ8BTT4L3bLp4="></script>


    
    

    

    <link rel="icon" type="image/png" href="https://projektemacher.org/images/favicon-32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://projektemacher.org/images/favicon-16.png" sizes="16x16">
    
        <link rel="icon" type="image/svg+xml" href="https://projektemacher.org/images/cm.svg">
    
    <link rel="alternate" type="text/bibtex" href="https://projektemacher.org/en/post/christianmahnke/post/simple-wikidata-queries/citation.bib" title="Projektemacher" />
    <link rel="canonical" type="text/html" href="https://projektemacher.org/en/post/christianmahnke/post/simple-wikidata-queries/" title="Projektemacher" />
    

    </head>

  
  
  <body class="colorscheme-light ">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://projektemacher.org/en"><img alt="Logo" class="header-logo" src="https://projektemacher.org/images/laborant.svg" />
        Projektemacher</a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/blogs/">Sites &amp; Blogs</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/posts/">News</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/archive/">Archive</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/search/">Search</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://merch.projektemacher.org/en/">Merch</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/contact/">Contact</a>
            </li>
          
        
        
          
          
          
            
              
                <li class="navigation-item menu-separator">
                  <span>|</span>
                </li>
                
              
              <li class="navigation-item">
                <a href="https://projektemacher.org/post/christianmahnke/post/simple-wikidata-queries/article.html">Deutsch</a>
              </li>
            
          
        
      </ul>
    
  </section>
</nav>


      
  <div class="content page">
    <section class="container page ">
      <article>
        <header>
          <h1 class="header">Simple data enrichment with Wikidata</h1>
        </header>
        <p>Found while tidying up the browser tabs&hellip;</p>
<p>&hellip;it was about how we can get more information (e.g. also an image) for a media station when we only have a <a href="https://www.dnb.de/EN/Professionell/Standardisierung/GND/gnd_node.html" target="_blank">GND</a> ID&hellip;</p>
<p>The answer is simple: just ask <a href="https://www.wikidata.org/wiki/Wikidata:Main_Page" target="_blank">Wikidata</a>. Basically, it is a generalised version of the query from the article about <a href="https://christianmahnke.de/post/wikidata-entities-in-hugo/" target="_blank">Hugo and Wikidata</a>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-sparql" data-lang="sparql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> ?propertyLabel ?valueLabel
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> {
</span></span><span style="display:flex;"><span>  ?item wdt:<span style="color:#f92672">P227</span> <span style="color:#e6db74">&#34;10153740-2&#34;</span> .
</span></span><span style="display:flex;"><span>  ?item ?wdt ?o .
</span></span><span style="display:flex;"><span>  ?property wikibase:<span style="color:#f92672">directClaim</span> ?wdt .
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">SERVICE</span> wikibase:<span style="color:#f92672">label</span> {
</span></span><span style="display:flex;"><span>    bd:<span style="color:#f92672">serviceParam</span> wikibase:<span style="color:#f92672">language</span> <span style="color:#e6db74">&#34;en,de&#34;</span> .
</span></span><span style="display:flex;"><span>    ?property rdfs:<span style="color:#f92672">label</span> ?propertyLabel .
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">OPTIONAL</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">FILTER</span>(<span style="color:#a6e22e">isIRI</span>(?o))
</span></span><span style="display:flex;"><span>    ?o rdfs:<span style="color:#f92672">label</span> ?enLabel .
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">FILTER</span>(<span style="color:#a6e22e">LANG</span>(?enLabel) <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;en&#34;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">BIND</span>(<span style="color:#a6e22e">COALESCE</span>(?enLabel, <span style="color:#a6e22e">STR</span>(?o)) <span style="color:#66d9ef">AS</span> ?valueLabel)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The query can simply be entered into the query window of the <a href="https://query.wikidata.org/#SELECT%20%3FpropertyLabel%20%3FvalueLabel%0AWHERE%20%7B%0A%20%20%3Fitem%20wdt%3AP227%20%2210153740-2%22%20.%0A%20%20%3Fitem%20%3Fwdt%20%3Fo%20.%0A%20%20%3Fproperty%20wikibase%3AdirectClaim%20%3Fwdt%20.%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%0A%20%20%20%20bd%3AserviceParam%20wikibase%3Alanguage%20%22en%2Cde%22%20.%0A%20%20%20%20%3Fproperty%20rdfs%3Alabel%20%3FpropertyLabel%20.%0A%20%20%7D%0A%20%20OPTIONAL%20%7B%0A%20%20%20%20FILTER%28isIRI%28%3Fo%29%29%0A%20%20%20%20%3Fo%20rdfs%3Alabel%20%3FenLabel%20.%0A%20%20%20%20FILTER%28LANG%28%3FenLabel%29%20%3D%20%22en%22%29%0A%20%20%7D%0A%20%20BIND%28COALESCE%28%3FenLabel%2C%20STR%28%3Fo%29%29%20AS%20%3FvalueLabel%29%0A%7D" target="_blank">Wikidata Query Services</a> To change the GND ID you are looking for, simply change <a href="https://www.wikidata.org/wiki/Property_talk:P227" target="_blank"><code>wdt:P227</code></a> (here <code>&quot;10153740-2&quot;</code>).
Of course, you can also search for other identifiers; there are now many available in Wikidata:</p>
<ul>
<li><a href="https://www.wikidata.org/wiki/Category:Properties_with_external-id-datatype" target="_blank">Properties with external IDs</a></li>
<li><a href="https://www.wikidata.org/wiki/Category:Authority_control_properties" target="_blank">Standard data properties</a></li>
</ul>
<p>And to integrate it into a Jupyter Notebook or Python script, this function can be used:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span><span style="color:#f92672">import</span> urllib.request
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> json
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> urllib.parse
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">query_by_gnd</span>(gnd_id):
</span></span><span style="display:flex;"><span>    query <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    SELECT ?propertyLabel ?valueLabel ?valueURI
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    WHERE {{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      ?item wdt:P227 &#34;</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34; .
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      ?item ?wdt ?o .
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      ?property wikibase:directClaim ?wdt .
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      SERVICE wikibase:label {{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        bd:serviceParam wikibase:language &#34;en,de&#34; .
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        ?property rdfs:label ?propertyLabel .
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      }}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      OPTIONAL {{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        FILTER(isIRI(?o))
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        ?o rdfs:label ?enLabel .
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        FILTER(LANG(?enLabel) = &#34;en&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      }}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      BIND(COALESCE(?enLabel, STR(?o)) AS ?valueLabel)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      BIND(IF(isIRI(?o), ?o, ?undefined) AS ?valueURI)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    }}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;&#34;&#34;</span><span style="color:#f92672">.</span>format(gnd_id)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    endpoint <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://query.wikidata.org/sparql&#34;</span>
</span></span><span style="display:flex;"><span>    params <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;query&#39;</span>: query,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;format&#39;</span>: <span style="color:#e6db74">&#39;json&#39;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    url <span style="color:#f92672">=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>endpoint<span style="color:#e6db74">}</span><span style="color:#e6db74">?</span><span style="color:#e6db74">{</span>urllib<span style="color:#f92672">.</span>parse<span style="color:#f92672">.</span>urlencode(params)<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    wikidata <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        req <span style="color:#f92672">=</span> urllib<span style="color:#f92672">.</span>request<span style="color:#f92672">.</span>Request(url, headers<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;Accept&#39;</span>: <span style="color:#e6db74">&#39;application/sparql-results+json&#39;</span>})
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">with</span> urllib<span style="color:#f92672">.</span>request<span style="color:#f92672">.</span>urlopen(req) <span style="color:#66d9ef">as</span> response:
</span></span><span style="display:flex;"><span>            data <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span>read()<span style="color:#f92672">.</span>decode(<span style="color:#e6db74">&#39;utf-8&#39;</span>)
</span></span><span style="display:flex;"><span>        results <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(data)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> binding <span style="color:#f92672">in</span> results[<span style="color:#e6db74">&#39;results&#39;</span>][<span style="color:#e6db74">&#39;bindings&#39;</span>]:
</span></span><span style="display:flex;"><span>            key <span style="color:#f92672">=</span> binding[<span style="color:#e6db74">&#39;propertyLabel&#39;</span>][<span style="color:#e6db74">&#39;value&#39;</span>]
</span></span><span style="display:flex;"><span>            value <span style="color:#f92672">=</span> binding[<span style="color:#e6db74">&#39;valueLabel&#39;</span>][<span style="color:#e6db74">&#39;value&#39;</span>]
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> key <span style="color:#f92672">in</span> wikidata:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> isinstance(wikidata[key], list):
</span></span><span style="display:flex;"><span>                    wikidata[key]<span style="color:#f92672">.</span>append(value)
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>                    wikidata[key] <span style="color:#f92672">=</span> [wikidata[key], value]
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>                wikidata[key] <span style="color:#f92672">=</span> value
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> wikidata
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> urllib<span style="color:#f92672">.</span>error<span style="color:#f92672">.</span>URLError <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Error accessing Wikidata endpoint: </span><span style="color:#e6db74">{</span>e<span style="color:#f92672">.</span>reason<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> json<span style="color:#f92672">.</span>JSONDecodeError <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Error decoding JSON: </span><span style="color:#e6db74">{</span>e<span style="color:#f92672">.</span>reason<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;An unexpected error occurred: </span><span style="color:#e6db74">{</span>e<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span></code></pre></div>
      </article>
    </section>
</div>



    </main>
    <footer class="footer"><div class="footer-container">
    <p class="projektemacher">
        Projektemacher is a <a href="https://projektemacher.org/en/">Projektemacher</a> blog <a title="Christian Mahnke" class="footer-link-cm" href="https://christianmahnke.de/"><img src="https://projektemacher.org/images/cm.svg" style="height: 16px; margin-left: .5rem;"></a>
    </p><p class="copyright">&copy; 2009 - 2026 </p><p class="privacy"><a href="https://projektemacher.org/privacy" title="Privacy policy">Privacy policy</a></p>Powered by <div class="footer-powered-by"><a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.</div></div>

  </footer>
  </body>

</html>
