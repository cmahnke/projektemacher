<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8"><meta property="og:url" content="https://projektemacher.org/en/post/christianmahnke/post/hdr-canvas-updated/article.html">
  <meta property="og:site_name" content="Projektemacher">
  <meta property="og:title" content="hdr-canvas 0.1.0 published">
  <meta property="og:description" content="hdr-canvas has been updated…">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2025-11-16T20:22:44+02:00">
    <meta property="article:modified_time" content="2025-11-16T20:22:44+02:00">
<title>
  hdr-canvas 0.1.0 published · Projektemacher
</title><link rel="canonical" href="https://projektemacher.org/en/post/christianmahnke/post/hdr-canvas-updated/article.html"><meta name="author" content="Christian Mahnke">
  <meta name="dc.creator" content="Christian Mahnke">

<meta http-equiv="Content-Language" content="en">
<meta name="dc.type" content="Text">
<meta name="description" content="Blog factory">
<meta property="og:type" content="article" /><meta property="og:url" content="https://projektemacher.org/en/post/christianmahnke/post/hdr-canvas-updated/article.html" /><meta property="og:title" content="hdr-canvas 0.1.0 published" />

  
  
    
  



<meta name="keywords" content="NPM, TypeScript[NPM, TypeScript], JavaScript, HDR"><meta name="dc.subject" content="NPM"><meta name="dc.subject" content="TypeScript[NPM"><meta name="dc.subject" content="TypeScript]"><meta name="dc.subject" content="JavaScript"><meta name="dc.subject" content="HDR">
<meta name="generator" content="Hugo 0.156.0">
<meta name="projektemacher.org:build-date" content="2026-03-01 05:25:23.469889108 &#43;0000 UTC m=&#43;13.886235846"><meta name="projektemacher.org:stats" content="{&#34;count&#34;:&#34;5067&#34;,&#34;latest&#34;:&#34;2027-10-19T12:47:44&#43;02:00&#34;}">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=no">

<link rel="icon" type="image/png" href="https://projektemacher.org/images/favicon-32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://projektemacher.org/images/favicon-16.png" sizes="16x16"><link rel="icon" type="image/svg+xml" href="https://projektemacher.org/images/cm.svg">
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
<link href="https://projektemacher.org/css/3dcde2e700baa65d3814003bfc8fa7f9.min.da70574f9d939ceb6c2b98417c8559a15bdcab44b3c80c7fd03e43eb4da25843.css" rel="stylesheet" integrity="sha256-2nBXT52TnOtsK5hBfIVZoVvcq0SzyAx/0D5D602iWEM=">
<script src="https://projektemacher.org/js/5d85c20c8f862f9ecfa0aee0edbc8fe4.min.9e312a1385cd8a0a9b42110fe749082c05337c88e1df8799f014d3e0bddb2e9e.js" integrity="sha256-njEqE4XNigqbQhEP50kILAUzfIjh34eZ8BTT4L3bLp4="></script>


    
    

    

    <link rel="icon" type="image/png" href="https://projektemacher.org/images/favicon-32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://projektemacher.org/images/favicon-16.png" sizes="16x16">
    
        <link rel="icon" type="image/svg+xml" href="https://projektemacher.org/images/cm.svg">
    
    <link rel="alternate" type="text/bibtex" href="https://projektemacher.org/en/post/christianmahnke/post/hdr-canvas-updated/citation.bib" title="Projektemacher" />
    <link rel="canonical" type="text/html" href="https://projektemacher.org/en/post/christianmahnke/post/hdr-canvas-updated/" title="Projektemacher" />
    

    </head>

  
  
  <body class="colorscheme-light ">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://projektemacher.org/en"><img alt="Logo" class="header-logo" src="https://projektemacher.org/images/laborant.svg" />
        Projektemacher</a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/blogs/">Sites &amp; Blogs</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/posts/">News</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/archive/">Archive</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/search/">Search</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://merch.projektemacher.org/en/">Merch</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/contact/">Contact</a>
            </li>
          
        
        
          
          
          
            
              
                <li class="navigation-item menu-separator">
                  <span>|</span>
                </li>
                
              
              <li class="navigation-item">
                <a href="https://projektemacher.org/post/christianmahnke/post/hdr-canvas-updated/article.html">Deutsch</a>
              </li>
            
          
        
      </ul>
    
  </section>
</nav>


      
  <div class="content page">
    <section class="container page ">
      <article>
        <header>
          <h1 class="header">hdr-canvas 0.1.0 published</h1>
        </header>
        <p><code>hdr-canvas</code> has been updated&hellip;</p>
<p>One result of my work with HDR content in the browser is an NPM module, which was also used to create the posts in this blog.
This article summarises the latest changes. It will be updated when new versions are released.</p>
<h1 id="version-011---012">
  Version 0.1.1 - 0.1.2
  <a class="heading-link" href="#version-011---012">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h1>
<p>These updates were necessary to fix the following blog posts:</p>
<ul>
<li><a href="https://christianmahnke.de/en/post/uv-photogrammetry/" target="_blank">UV photogrammetry</a></li>
<li><a href="https://christianmahnke.de/en/post/hdr-image-analysis/" target="_blank">Contrast enhancement for UV images using HDR rendering</a></li>
</ul>
<h2 id="011">
  0.1.1
  <a class="heading-link" href="#011">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<h3 id="changes-to-the-initialisation-of-a-webgpu-context-for-canvas">
  Changes to the initialisation of a <code>WebGPU</code> context for <code>canvas</code>
  <a class="heading-link" href="#changes-to-the-initialisation-of-a-webgpu-context-for-canvas">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h3>
<p>The changes to the initialisation of a <code>canvas</code> for a renderer are described in the <a href="https://github.com/ccameron-chromium/webgpu-hdr/blob/main/EXPLAINER.md" target="_blank">explanation</a>.</p>
<p>The most important change is the renaming of ‘colourMetadata’ to:</p>
<pre tabindex="0"><code>toneMapping: { mode: ‘extended’ }
</code></pre><h2 id="012">
  0.1.2
  <a class="heading-link" href="#012">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<p>The colour scaling of <code>Float16Image</code> was incorrect; the scaling only worked for 0% - 1%.</p>
<h1 id="version-010">
  Version 0.1.0
  <a class="heading-link" href="#version-010">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h1>
<p>A year has passed since the first versions and the browser API was rather experimental at that time. A lot has changed since then - one of the examples had even stopped working in the meantime: The most important change concerns the change from <code>Uint16</code> to <code>Float16</code> as 16 bit pixel data type for HDR.</p>
<p>Since browsers are developing rapidly and the use of older browsers is not recommended for security reasons (even if some people see it differently), <strong>no downward compatibility</strong> is to be expected.</p>
<p>In addition to the necessary adjustments, the new version also offers improvements in the area of documentation and examples.</p>
<p>The code can be found on <a href="https://github.com/cmahnke/hdr-canvas" target="_blank">GitHub</a> and <a href="https://www.npmjs.com/package/hdr-canvas" target="_blank">NPM</a>.</p>
<h2 id="the-release-notes">
  The release notes
  <a class="heading-link" href="#the-release-notes">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<h3 id="introduction">
  Introduction
  <a class="heading-link" href="#introduction">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h3>
<p>Since the last release many areas of handling HDR contet in the browser have evolved.
Most notably is certainly the introduction of the <code>Float16Array</code> in the <code>ImageData</code> construtor:</p>
<ul>
<li>The <a href="https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#imagedataarray" target="_blank">WhatWG spec</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/ImageData/ImageData#syntax" target="_blank">MDN</a> and <a href="https://github.com/mdn/browser-compat-data/issues/27547" target="_blank">BCD</a>) have been updated accordingly. You can test your own browser using <code>new ImageData(new Float16Array(4), 1, 1, {pixelFormat:&quot;rgba-float16&quot;})</code>.
<ul>
<li>Still open in <a href="https://bugzil.la/1958830" target="_blank">Firefox</a></li>
<li>Hidden behind flag in <a href="https://webkit.org/b/291196" target="_blank">Safari</a></li>
<li>Chromium has implemented it starting with <a href="https://source.chromium.org/chromium/chromium/src/&#43;/refs/tags/137.0.7104.0:third_party/blink/renderer/core/html/canvas/image_data.idl" target="_blank">137</a>: **The <code>ImageData</code> constructor only acceppts <code>Float16Array</code> instead of <code>Uint16Array</code>. This makes older versions of this modue obsolute, since they targeted the chromium specific solution.</li>
<li>If Safari enables it by default it will be also in the <a href="https://github.com/microsoft/TypeScript-DOM-lib-generator/issues/2107" target="_blank">Typescript DOM types</a></li>
</ul>
</li>
</ul>
<p>As <a href="https://github.com/reitowo" target="_blank">@reitowo</a> pointed out, there has been a change to the <code>getContext(&quot;2d&quot;)</code> method. The key <code>pixelFormat</code> has been replaced by <code>colorType</code>.</p>
<p>In parallel there have been changes to the UltraHDR image format, especially the encoding of gain map metadata. While this used to be don in XMP it&rsquo;s now done according to ISO 21496-1. This has been adopted by Google and Apple in newer OS versions like Android 15 and iOS 18 to avoid cross-platform fragmentation. The <a href="https://github.com/google/libultrahdr" target="_blank">UltraHDR Library</a> has already changed to using the <a href="https://github.com/google/libultrahdr/blob/main/docs/building.md" target="_blank">ISO format as default</a>.</p>
<p>Currently the ThreeJS UHDR loader doesn&rsquo;t know how to handle this change, see <a href="https://github.com/mrdoob/three.js/issues/32293" target="_blank">mrdoob/three.js#32293</a>.</p>
<h3 id="key-changes--new-features">
  Key Changes &amp; New Features
  <a class="heading-link" href="#key-changes--new-features">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h3>
<ul>
<li>Better support for official Web-APIs
<ul>
<li>Use <code>Float16Array</code> instead of <code>Uint16Array</code></li>
<li>Use the correct option for initializing 2D canvas context</li>
</ul>
</li>
</ul>
<h4 id="improved-documentation">
  Improved Documentation
  <a class="heading-link" href="#improved-documentation">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>The documentation have been greatly improved, there is now also a <a href="https://cmahnke.github.io/hdr-canvas/" target="_blank">site</a> including the examples and API docs.</p>
<h4 id="examples">
  Examples
  <a class="heading-link" href="#examples">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h4>
<p>The examples from this blog are now part of this repository:</p>
<ul>
<li><a href="tests/site/assets/ts/hdr-three.js.ts"><code>tests/site/assets/ts/hdr-three.js.ts</code></a> - Three JS with HDR texture</li>
<li><a href="tests/site/assets/ts/image-slider.ts"><code>tests/site/assets/ts/image-slider.ts</code></a> - Generated HDR content</li>
<li><a href="tests/site/assets/ts/main.ts"><code>tests/site/assets/ts/main.ts</code></a> - feature detection</li>
</ul>
<p>These example are also avalable on the new <a href="https://cmahnke.github.io/hdr-canvas/" target="_blank">documentation site</a></p>
<h3 id="advocacy">
  Advocacy
  <a class="heading-link" href="#advocacy">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h3>
<p>Since the changes by the WhatWG weren&rsquo;t picked up already there had to be some Issues in the relevant repos to be raised.</p>
<ul>
<li><a href="https://github.com/mdn/content/issues/40639" target="_blank">mdn/content#40639</a></li>
<li><a href="https://github.com/mdn/browser-compat-data/issues/27547" target="_blank">mdn/browser-compat-data#27547</a></li>
<li><a href="https://github.com/microsoft/TypeScript-DOM-lib-generator/issues/2107" target="_blank">microsoft/TypeScript-DOM-lib-generator#2107</a></li>
<li><a href="https://github.com/mrdoob/three.js/issues/32293" target="_blank">mrdoob/three.js#32293</a>.</li>
</ul>
      </article>
    </section>
</div>



    </main>
    <footer class="footer"><div class="footer-container">
    <p class="projektemacher">
        Projektemacher is a <a href="https://projektemacher.org/en/">Projektemacher</a> blog <a title="Christian Mahnke" class="footer-link-cm" href="https://christianmahnke.de/"><img src="https://projektemacher.org/images/cm.svg" style="height: 16px; margin-left: .5rem;"></a>
    </p><p class="copyright">&copy; 2009 - 2026 </p><p class="privacy"><a href="https://projektemacher.org/privacy" title="Privacy policy">Privacy policy</a></p>Powered by <div class="footer-powered-by"><a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.</div></div>

  </footer>
  </body>

</html>
