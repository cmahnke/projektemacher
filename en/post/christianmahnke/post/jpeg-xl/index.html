<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8"><meta property="og:url" content="https://projektemacher.org/en/post/christianmahnke/post/jpeg-xl/">
  <meta property="og:site_name" content="Projektemacher">
  <meta property="og:title" content="JPEG XL">
  <meta property="og:description" content="Since my blogs are managed on GitHub, the images have to be stored as storage-saving as possible…">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2021-04-17T11:22:44+02:00">
    <meta property="article:modified_time" content="2021-04-17T11:22:44+02:00">
<title>
  JPEG XL · Projektemacher
</title><link rel="canonical" href="https://projektemacher.org/en/post/christianmahnke/post/jpeg-xl/"><meta name="author" content="Christian Mahnke">
  <meta name="dc.creator" content="Christian Mahnke">

<meta http-equiv="Content-Language" content="en">
<meta name="dc.type" content="Text">
<meta name="description" content="Blog factory">
<meta property="og:type" content="article" /><meta property="og:url" content="https://projektemacher.org/en/post/christianmahnke/post/jpeg-xl/" /><meta property="og:title" content="JPEG XL" />

  
  
    
  



<meta name="keywords" content="blog, book, digitization, history, cultural history, DigitalImages, Projektemacher.org, IIIF, VIPS"><meta name="dc.subject" content="blog"><meta name="dc.subject" content="book"><meta name="dc.subject" content="digitization"><meta name="dc.subject" content="history"><meta name="dc.subject" content="cultural history"><meta name="dc.subject" content="DigitalImages"><meta name="dc.subject" content="Projektemacher.org"><meta name="dc.subject" content="IIIF"><meta name="dc.subject" content="VIPS">
<meta name="generator" content="Hugo 0.156.0">
<meta name="projektemacher.org:build-date" content="2026-03-01 05:25:23.469889108 &#43;0000 UTC m=&#43;13.886235846"><meta name="projektemacher.org:stats" content="{&#34;count&#34;:&#34;5067&#34;,&#34;latest&#34;:&#34;2027-10-19T12:47:44&#43;02:00&#34;}">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=no">

<link rel="icon" type="image/png" href="https://projektemacher.org/images/favicon-32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://projektemacher.org/images/favicon-16.png" sizes="16x16"><link rel="icon" type="image/svg+xml" href="https://projektemacher.org/images/cm.svg">
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
<link href="https://projektemacher.org/css/3dcde2e700baa65d3814003bfc8fa7f9.min.da70574f9d939ceb6c2b98417c8559a15bdcab44b3c80c7fd03e43eb4da25843.css" rel="stylesheet" integrity="sha256-2nBXT52TnOtsK5hBfIVZoVvcq0SzyAx/0D5D602iWEM=">
<script src="https://projektemacher.org/js/5d85c20c8f862f9ecfa0aee0edbc8fe4.min.9e312a1385cd8a0a9b42110fe749082c05337c88e1df8799f014d3e0bddb2e9e.js" integrity="sha256-njEqE4XNigqbQhEP50kILAUzfIjh34eZ8BTT4L3bLp4="></script>


    
    

    

    <link rel="icon" type="image/png" href="https://projektemacher.org/images/favicon-32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://projektemacher.org/images/favicon-16.png" sizes="16x16">
    
        <link rel="icon" type="image/svg+xml" href="https://projektemacher.org/images/cm.svg">
    
    

    </head>

  
  
  <body class="colorscheme-light ">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://projektemacher.org/en"><img alt="Logo" class="header-logo" src="https://projektemacher.org/images/laborant.svg" />
        Projektemacher</a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/blogs/">Sites &amp; Blogs</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/posts/">News</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/archive/">Archive</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/search/">Search</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://merch.projektemacher.org/en/">Merch</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://projektemacher.org/en/contact/">Contact</a>
            </li>
          
        
        
          
          
          
            
              
                <li class="navigation-item menu-separator">
                  <span>|</span>
                </li>
                
              
              <li class="navigation-item">
                <a href="https://projektemacher.org/post/christianmahnke/post/jpeg-xl/">Deutsch</a>
              </li>
            
          
        
      </ul>
    
  </section>
</nav>


      
  <div class="content page">
    <section class="container page ">
      <article>
        <header>
          <h1 class="header">JPEG XL</h1>
        </header>
        <p>Since my blogs are managed on GitHub, the images have to be stored as storage-saving as possible&hellip;</p>
<h1 id="why-jpeg-xl">
  Why JPEG XL?
  <a class="heading-link" href="#why-jpeg-xl">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h1>
<p><a href="https://en.wikipedia.org/wiki/JPEG_XL" target="_blank">JPEG XL</a> is a new format for raster images, in fact, is&rsquo;s so recent (at the time this text was written) there haven&rsquo;t even been an entry in the German Wikipedia.</p>
<p>You can read there what exactly JPEG XL does differently or better than the well-known JPEG. We limit ourselves here to the advantages for the Projektemacher blogs:</p>
<ul>
<li>Less storage space required</li>
<li>Lossless compression available</li>
</ul>
<p>Disadvantages are currently:</p>
<ul>
<li>Few programs can handle it</li>
<li>The existing algorithms are not yet optimized - it is slower</li>
</ul>
<p>The reference implementation can be found on <a href="https://gitlab.com/wg1/jpeg-xl" target="_blank">GitLab</a>.</p>
<h1 id="how">
  How?
  <a class="heading-link" href="#how">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h1>
<p>Since the conversion to IIIF derivatives on GitHub is done by a <a href="https://github.com/cmahnke/iiif-action" target="_blank">Docker image</a>, the easiest way to integrate the use of the new format into the tool chain is to add JPEG XL support to this image. For the used <a href="https://github.com/libvips/libvips" target="_blank">LibVIPS</a> there is a <a href="https://github.com/libvips/libvips/pull/2181" target="_blank">Pull Request</a>, which supports the JPEG XL reference implementation. This is now built into a variant of the image for conversion:</p>
<pre tabindex="0"><code>docker pull ghcr.io/cmahnke/iiif-action:latest-jxl
</code></pre><h1 id="preparations">
  Preparations
  <a class="heading-link" href="#preparations">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h1>
<h2 id="start-an-interactive-container">
  Start an interactive container
  <a class="heading-link" href="#start-an-interactive-container">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<p>The image can also be used to create the source files.</p>
<pre tabindex="0"><code>docker run -it -v ${PWD}:${PWD} &#39;ghcr.io/cmahnke/iiif-action:latest-jxl&#39; /bin/bash -c &#34;cd ${PWD}; $SHELL&#34;
</code></pre><h2 id="file-conversion">
  File conversion
  <a class="heading-link" href="#file-conversion">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<p>Using <code>vips</code> directly has the advantage that you can use any supported input file format.</p>
<pre tabindex="0"><code>vips copy front.tif front.jxl[Q=100]
</code></pre><p>The following issues have been discovered:</p>
<ul>
<li><code>vips jxlsave</code> does not support parameters</li>
<li>The parameter <code>effort</code> can lead to a crash if it is greater than <code>7</code> - might be a memory problem, not yet tested with <code>cjxl</code></li>
</ul>
<p><code>cjxl</code> can also be used, but you should use a losslessly compressed (e.g. PNG) input file:</p>
<pre tabindex="0"><code>cjxl front.png front.jxl
</code></pre><p>The possible options are linked here:</p>
<ul>
<li><a href="https://github.com/libvips/libvips/blob/add-jxl/libvips/foreign/jxlsave.c" target="_blank"><code>vips jxlsave</code></a></li>
<li><a href="https://gitlab.com/wg1/jpeg-xl/-/blob/master/doc/man/cjxl.txt" target="_blank"><code>cjxl</code></a></li>
</ul>
<h2 id="options">
  Options
  <a class="heading-link" href="#options">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<p>Since the use of JPEG XL is primarily intended here to reduce the storage requirement and with the same or higher quality, it is important to take this into account during the conversion. If possible, the processed master images (i.e. uncompressed image data) should be used directly to create the derivatives. JPEG files (ImageMagick quality level 95) are currently the source material for creating IIIF derivates.</p>
<p><a href="https://github.com/google/butteraugli" target="_blank"><code>butteraugli</code></a> is used to assess the quality.</p>
<h3 id="generate-comparison-file">
  Generate comparison file
  <a class="heading-link" href="#generate-comparison-file">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h3>
<pre tabindex="0"><code>convert front.tif -quality 95 front.jpg
</code></pre><p><code>butteraugli</code> can read JPEG or PNG files.</p>
<h2 id="results">
  Results
  <a class="heading-link" href="#results">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<p>This post does not claim to achieve the most optimal results. In addition, the JPEG XL encoder is very memory-hungry and can therefore not be fully tried out in the Docker environment. For these reasons there are no benchmarks, comparisons of file sizes, etc.</p>
<p>Basically what was known at the beginning remains: files are smaller with a similar quality.</p>
<h1 id="iiif">
  IIIF
  <a class="heading-link" href="#iiif">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h1>
<p>After you have created a few JPEG XL files, you can now generate IIIF derivatives:</p>
<pre tabindex="0"><code>vips dzsave front.jxl front -t 512 --layout iiif
</code></pre>
      </article>
    </section>
</div>



    </main>
    <footer class="footer"><div class="footer-container">
    <p class="projektemacher">
        Projektemacher is a <a href="https://projektemacher.org/en/">Projektemacher</a> blog <a title="Christian Mahnke" class="footer-link-cm" href="https://christianmahnke.de/"><img src="https://projektemacher.org/images/cm.svg" style="height: 16px; margin-left: .5rem;"></a>
    </p><p class="copyright">&copy; 2009 - 2026 </p><p class="privacy"><a href="https://projektemacher.org/privacy" title="Privacy policy">Privacy policy</a></p>Powered by <div class="footer-powered-by"><a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.</div></div>

  </footer>
  </body>

</html>
